# ============================================================================
# FpelAICCTV - Environment Configuration Template
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ----------------------------------------------------------------------------
# Database Configuration
# ----------------------------------------------------------------------------
# MS SQL Server connection string (ODBC format)
# For Azure Linux (FreeTDS driver - pre-installed):
DATABASE_URL=Driver={FreeTDS};Server=your-server.database.windows.net;Database=your_database;UID=your_username;PWD=your_password;TDS_Version=7.4;Port=1433;

# For Windows/macOS with ODBC Driver 17 installed:
# DATABASE_URL=Driver={ODBC Driver 17 for SQL Server};Server=your-server.database.windows.net;Database=your_database;Uid=your_username;Pwd=your_password;

# Note: FreeTDS is recommended for Azure App Service (Linux) as it's pre-installed

# ----------------------------------------------------------------------------
# API Security
# ----------------------------------------------------------------------------
# API key for authenticating requests (change in production!)
API_KEY=111-1111-1-11-1-11-1-1

# ----------------------------------------------------------------------------
# CORS & Origins
# ----------------------------------------------------------------------------
# Comma-separated list of allowed origins for CORS
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000,http://localhost:8080

# ----------------------------------------------------------------------------
# File Storage
# ----------------------------------------------------------------------------
# Directory for storing detection images
# Docker: /app/images
# Azure: /home/images
# Local: ./images
IMAGES_DIR=./images

# Directory for static frontend files (auto-detected if not set)
STATIC_DIR=

# ----------------------------------------------------------------------------
# Detection Worker Configuration (for WebJobs or separate detection process)
# ----------------------------------------------------------------------------
# Base URL of the FastAPI backend
API_BASE_URL=http://localhost:8000/api/v1

# Detection confidence threshold (0.0 to 1.0)
CONFIDENCE_THRESHOLD=0.5

# Frame processing dimensions
DETECTION_WIDTH=640
DETECTION_HEIGHT=480

# Process every Nth frame to reduce CPU load
FRAME_STRIDE=5

# Minimum seconds between detection events for same camera
EVENT_COOLDOWN_SECONDS=5

# Minimum seconds between snapshots for same tracked object
TRACK_COOLDOWN_SECONDS=30

# Minimum bounding box area to filter out tiny detections
MIN_BOX_AREA=1000

# Camera IDs to monitor (comma-separated UUIDs, empty = all cameras)
CAMERA_IDS=

# Include offline cameras in detection worker
INCLUDE_OFFLINE=false

# OpenCV/FFmpeg capture options (advanced)
OPENCV_FFMPEG_CAPTURE_OPTIONS=rtsp_transport;tcp;fflags;genpts+nobuffer;flags;low_delay

# ----------------------------------------------------------------------------
# Azure-specific (App Service, WebJobs)
# ----------------------------------------------------------------------------
# Oryx automatically sets PYTHONPATH, but you can override if needed
# PYTHONPATH=/home/site/wwwroot

# Ensure Python output is unbuffered for real-time logs
PYTHONUNBUFFERED=1

# ----------------------------------------------------------------------------
# Optional: Alert Configuration (if implementing Telegram/Siren alerts)
# ----------------------------------------------------------------------------
# TELEGRAM_BOT_TOKEN=
# TELEGRAM_CHAT_ID=
# SIREN_IP_ADDRESS=
# SIREN_PORT=

# ----------------------------------------------------------------------------
# Azure SSO Authentication
# ----------------------------------------------------------------------------
# Azure AD Application credentials for SSO login
AZURE_TENANT_ID=
AZURE_CLIENT_ID=
AZURE_CLIENT_SECRET=
REDIRECT_URI=http://localhost:8000/auth/callback

# Domain restriction for SSO (e.g., fourthpartner.co)
# Leave empty to allow all domains
ALLOWED_DOMAIN=

# Session secret key (generate a random string for production)
SESSION_SECRET_KEY=your-secret-key-change-this-in-production

# Application name (shown on login page)
APP_NAME=FpelAICCTV Person Detection
